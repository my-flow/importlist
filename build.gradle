buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }
    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:2.0.4'
        classpath 'org.apache.commons:commons-configuration2:2.3'
        classpath 'net.sf.proguard:proguard-gradle:6.0.2'
    }
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'checkstyle'
    apply plugin: 'pmd'
    apply plugin: 'eclipse'
    apply plugin: 'idea'
    apply plugin: 'findbugs'

    sourceCompatibility = 1.8

    ext {
        privkeyid = '99'
        privkeyfile = "$rootDir/config/priv_key"
        pubkeyfile = "$rootDir/config/pub_key"
        mxtfile = "${project(':core').distsDir}/${rootProject.name}.mxt"
    }

    repositories {
        mavenCentral()
        flatDir dirs: "$rootDir/lib"
    }

    checkstyle {
        toolVersion '8.14';
    }

    pmd {
        toolVersion = "6.9.0"
        ruleSets = []
        ruleSetFiles = files("$rootDir/config/pmd-ruleSet.xml")
    }

    findbugs {
        toolVersion = "3.0.1"
        effort = "max"
        reportLevel = "medium"
        excludeFilter file("$rootDir/config/findbugs-exclude.xml")
    }

    tasks.withType(FindBugs) {
        reports {
            xml.enabled = false
            html.enabled = true
        }
    }
}
